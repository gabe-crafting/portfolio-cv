import{z as R,b as W,O as x,B as y,h as p,w as m,C as B,D as j,b1 as M,T as D,bG as I,y as N,ba as U,r as V,aK as H,c as L,e as d,n as b,E as i,b2 as F,d as T,F as G,aN as q,j as X,bH as K,m as O,l as J}from"./B1K6FPZA.js";import{u as Q,f as Y,a as Z,m as w,r as C,d as ee,M as _}from"./Bm0U2_0X.js";import{_ as te,a as ne,b as oe}from"./D4_xsTN0.js";function ae(s){const e=new WeakMap,h=Q();function v(t){if(s.mode!=="popLayout")return;const l=t.element.offsetParent,r=l instanceof HTMLElement&&l.offsetWidth||0,o={height:t.element.offsetHeight||0,width:t.element.offsetWidth||0,top:t.element.offsetTop,left:t.element.offsetLeft,right:0};o.right=r-o.width-o.left;const g=s.anchorX==="left"?`left: ${o.left}`:`right: ${o.right}`;t.element.dataset.motionPopId=t.id;const n=document.createElement("style");h.value.nonce&&(n.nonce=h.value.nonce),e.set(t,n),document.head.appendChild(n),n.sheet&&n.sheet.insertRule(`
    [data-motion-pop-id="${t.id}"] {
      position: absolute !important;
      width: ${o.width}px !important;
      height: ${o.height}px !important;
      top: ${o.top}px !important;
      ${g}px !important;
      }
      `)}function f(t){const l=e.get(t);l&&(e.delete(t),Y.render(()=>{document.head.removeChild(l)}))}return{addPopStyle:v,removePopStyle:f,styles:e}}function A(s){return Promise.resolve().then(()=>{s()})}const se=R({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(s){const e=s;Z(e);const{addPopStyle:h,removePopStyle:v,styles:f}=ae(e);function t(n){let a=n;for(;a;){if(w.get(a))return a;a=a.firstElementChild}return null}function l(n){const a=w.get(n);a&&(v(a),a.isVShow=!0,C(n),A(()=>{a.setActive("exit",!1)}))}const r=new Map;W(()=>{r.clear()});function o(n,a){var P;const c=t(n),u=w.get(c);if(!c||!u){a(),r.size===0&&((P=e.onExitComplete)==null||P.call(e));return}r.set(c,!0),C(c),h(u);function S(E){var k,z;if((k=E?.detail)!=null&&k.isExit){const $=u.visualElement.projection;if($?.animationProgress>0&&!u.isSafeToRemove&&!u.isVShow)return;C(c),r.delete(c),r.size===0&&((z=e.onExitComplete)==null||z.call(e)),f.has(u)?v(u):u.willUpdate("done"),a(),c.isConnected||u.unmount(!0)}}A(()=>{u.setActive("exit",!0),ee.set(c,S),c.addEventListener("motioncomplete",S)})}const g=x(()=>e.mode!=="wait"?{tag:e.as}:{mode:e.mode==="wait"?"out-in":void 0});return(n,a)=>(p(),y(M(n.mode==="wait"?D:I),j({css:!1},g.value,{appear:"",onEnter:l,onLeave:o}),{default:m(()=>[B(n.$slots,"default")]),_:3},16))}}),ie={slots:{base:"rounded-md",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none p-4 sm:p-8"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},le=["onClick"],de={__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(s){const e=s,h=N(),[v,f]=U(),t=V(!1),l=x(()=>q({extend:q(ie),...h.uiPro?.prose?.img||{}})({zoom:e.zoom,open:t.value})),r=x(()=>{if(e.src?.startsWith("/")&&!e.src.startsWith("//")){const o=X(K(O().app.baseURL));if(o!=="/"&&!e.src.startsWith(o))return J(o,e.src)}return e.src});return e.zoom&&H(window,"scroll",()=>{t.value=!1}),(o,g)=>(p(),L(G,null,[d(i(v),null,{default:m(()=>[(p(),y(M(i(F)),{src:r.value,alt:s.alt,width:s.width,height:s.height,class:b(l.value.base({class:[e.ui?.base,e.class]}))},null,8,["src","alt","width","height","class"]))]),_:1}),s.zoom?(p(),y(i(oe),{key:0,open:t.value,"onUpdate:open":g[0]||(g[0]=n=>t.value=n),modal:!1},{default:m(({close:n})=>[d(i(te),{"as-child":""},{default:m(()=>[d(i(_),{"layout-id":r.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:m(()=>[d(i(f))]),_:1},8,["layout-id"])]),_:1}),d(i(ne),null,{default:m(()=>[d(i(se),null,{default:m(()=>[t.value?(p(),y(i(_),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:b(l.value.overlay({class:[e.ui?.overlay]}))},null,8,["class"])):T("",!0),t.value?(p(),L("div",{key:1,class:b(l.value.content({class:[e.ui?.content]})),onClick:n},[d(i(_),{"as-child":"","layout-id":r.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:m(()=>[d(i(f))]),_:1},8,["layout-id"])],10,le)):T("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(p(),y(i(f),{key:1}))],64))}};export{de as default};
