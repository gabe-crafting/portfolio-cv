import{O as h,b4 as Y,m as Z,b5 as ee,b6 as R,b7 as te,B as k,C as S,h as f,E as a,n as x,b8 as oe,b9 as q,_ as ne,y as N,ba as se,aN as U,c as j,e as m,d as I,w as P,aw as E,f as b,ai as H,au as F,t as $,P as V,F as ae,bb as re,z as ie,q as le,aP as O,aS as ce,bc as ue,r as de,aT as pe,bd as me,aQ as A,aR as fe,be as ge,b3 as _e,aU as ve,b2 as he,D as ye,as as be}from"./DPFjAART.js";import{_ as Pe}from"./7Mvjd2Pq.js";import{h as M,M as xe}from"./Pbf5gTJj.js";import"./iik6CYzq.js";function z(s,n,o=0){const c={title:"label",path:"to"},e=Object.keys(s).reduce((u,d)=>{if(s[d]){const T=c[d]||d;u[T]=s[d]}return u},{});return Array.isArray(s.children)?e.children=s.children.map(u=>z(u,n,o+1)):e.children=[],e}function Ce(s,n){return s.map(o=>z(o,n))}function G(s,n){return!s?.length||!n?[]:s.reduce((o,c)=>(n.path&&(n.path+"/").startsWith(c.path+"/")&&c.children&&(o.push(c),o.push(...G(c.children,n))),o),[])}const K=["ProseA","ProseAccordion","ProseAccordionItem","ProseBadge","ProseBlockquote","ProseCallout","ProseCard","ProseCardGroup","ProseCode","ProseCodeCollapse","ProseCodeGroup","ProseCodeIcon","ProseCodePreview","ProseCodeTree","ProseCollapsible","ProseEm","ProseField","ProseFieldGroup","ProseH1","ProseH2","ProseH3","ProseH4","ProseHr","ProseIcon","ProseImg","ProseKbd","ProseLi","ProseOl","ProseP","ProsePre","ProseScript","ProseSteps","ProseStrong","ProseTable","ProseTabs","ProseTabsItem","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl","ProseCaution","ProseNote","ProseTip","ProseWarning","ProseH5","ProseH6","Icon"],W=[],ke=Object.freeze(Object.defineProperty({__proto__:null,globalComponents:K,localComponents:W},Symbol.toStringTag,{value:"Module"})),Te={__name:"ContentRenderer",props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(s){const n=["render","ssrRender","__ssrInlineRender"],o=s,c=!1,e=h(()=>{let t=o.value.body||o.value;return o.excerpt&&o.value.excerpt&&(t=o.value.excerpt),t.type==="minimal"||t.type==="minimark"?Y({value:t.value}):t}),u=h(()=>!e.value?.children?.length),d=h(()=>{const{body:t,excerpt:r,...i}=o.value;return{...i,...o.data}}),T=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(t=>[t,`prose-${t}`])),{mdc:C}=Z().public||{},w=h(()=>({...C?.components?.prose&&o.prose!==!1?T:{},...C?.components?.map||{},...ee(o.data?.mdc?.components||{}),...o.components})),l=h(()=>e.value?p(e.value,{tags:w.value}):{});function L(t){let r=t;if(typeof t=="string"){if(M.includes(t))return t;if(K.includes(R(t))?r=oe(t,!1):W.includes(R(t))&&(r=q(()=>ne(()=>Promise.resolve().then(()=>ke),void 0,import.meta.url).then(g=>{const _=g[R(t)];return _?_():void 0}))),typeof r=="string")return r}if(!r)return r;const i=r;return"__asyncLoader"in i?i:"setup"in i?q(()=>Promise.resolve(i)):i}function p(t,r){if(!t)return;const i=Array.from(new Set(y(t,r))),v={};for(const[g,_]of i)if(!v[g]){if(typeof _=="object"&&n.some(D=>Object.hasOwnProperty.call(_,D))){v[g]=_;continue}v[g]=L(_)}return v}function y(t,r){const i=t.tag;if(t.type==="text"||i==="binding"||t.type==="comment")return[];const v=B(t,r.tags),g=[];t.type!=="root"&&!M.includes(v)&&g.push([i,v]);for(const _ of t.children||[])g.push(...y(_,r));return g}function B(t,r){const i=t.tag;return!i||typeof t.props?.__ignoreMap<"u"?i:r[i]||r[R(i)]||r[te(t.tag)]||i}return(t,r)=>u.value?S(t.$slots,"empty",{key:1,body:e.value,data:d.value,dataContentId:a(c)?s.value.id:void 0}):(f(),k(xe,{key:0,body:e.value,data:d.value,class:x(o.class),tag:o.tag,prose:o.prose,unwrap:o.unwrap,components:l.value,"data-content-id":a(c)?s.value.id:void 0},null,8,["body","data","class","tag","prose","unwrap","components","data-content-id"]))}},we={slots:{root:"grid grid-cols-1 sm:grid-cols-2 gap-8",link:["group block px-6 py-8 rounded-lg border border-default hover:bg-elevated/50 focus-visible:outline-primary","transition-colors"],linkLeading:["inline-flex items-center rounded-full p-1.5 bg-elevated group-hover:bg-primary/10 ring ring-accented mb-4 group-hover:ring-primary/50","transition"],linkLeadingIcon:["size-5 shrink-0 text-highlighted group-hover:text-primary","transition-[color,translate]"],linkTitle:"font-medium text-[15px] text-highlighted mb-1 truncate",linkDescription:"text-sm text-muted line-clamp-2"},variants:{direction:{left:{linkLeadingIcon:["group-active:-translate-x-0.5"]},right:{link:"text-right",linkLeadingIcon:["group-active:translate-x-0.5"]}}}},Ie={key:1,class:"hidden lg:block"},Se={__name:"UContentSurround",props:{as:{type:null,required:!1},prevIcon:{type:String,required:!1},nextIcon:{type:String,required:!1},surround:{type:Array,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(s){const n=s,o=N(),[c,e]=se({props:{link:Object,icon:String,direction:String}}),u=h(()=>U({extend:U(we),...o.uiPro?.contentSurround||{}})());return(d,T)=>{const C=H,w=E;return f(),j(ae,null,[m(a(c),null,{default:P(({link:l,icon:L,direction:p})=>[l?(f(),k(w,{key:0,to:l.path,raw:"",class:x(u.value.link({class:[n.ui?.link,l.ui?.link,l.class],direction:p}))},{default:P(()=>[S(d.$slots,"link",{link:l},()=>[b("div",{class:x(u.value.linkLeading({class:[n.ui?.linkLeading,l.ui?.linkLeading]}))},[S(d.$slots,"link-leading",{link:l},()=>[m(C,{name:l.icon||L,class:x(u.value.linkLeadingIcon({class:[n.ui?.linkLeadingIcon,l.ui?.linkLeadingIcon],direction:p}))},null,8,["name","class"])])],2),b("p",{class:x(u.value.linkTitle({class:[n.ui?.linkTitle,l.ui?.linkTitle]}))},[S(d.$slots,"link-title",{link:l},()=>[F($(l.title),1)])],2),b("p",{class:x(u.value.linkDescription({class:[n.ui?.linkDescription,l.ui?.linkDescription]}))},[S(d.$slots,"link-description",{link:l},()=>[F($(l.description),1)])],2)])]),_:2},1032,["to","class"])):(f(),j("span",Ie,"Â "))]),_:3}),s.surround?(f(),k(a(V),{key:0,as:s.as,class:x(u.value.root({class:[n.ui?.root,n.class]}))},{default:P(()=>[m(a(e),{link:s.surround[0],icon:s.prevIcon||a(o).ui.icons.arrowLeft,direction:"left"},null,8,["link","icon"]),m(a(e),{link:s.surround[1],icon:s.nextIcon||a(o).ui.icons.arrowRight,direction:"right"},null,8,["link","icon"])]),_:1},8,["as","class"])):I("",!0)],64)}}},$e={base:"mt-8 pb-24 space-y-12"},Le={__name:"UPageBody",props:{as:{type:null,required:!1},class:{type:null,required:!1}},setup(s){const n=s,o=N(),c=h(()=>U({extend:U($e),...o.uiPro?.pageBody||{}}));return(e,u)=>(f(),k(a(V),{as:s.as,class:x(c.value({class:n.class}))},{default:P(()=>[S(e.$slots,"default")]),_:3},8,["as","class"]))}};function je(s,n="Copied to clipboard"){const o=re();navigator.clipboard.writeText(s).then(()=>{o.add({title:n,color:"success",icon:"i-lucide-check-circle"})})}const Re={class:"flex flex-col gap-3 mt-8"},Ue={class:"flex text-xs text-muted items-center justify-center gap-2"},Be={key:0},De={key:1},Fe={key:2},qe={class:"text-4xl text-center font-medium max-w-3xl mx-auto mt-4"},Oe={class:"text-muted text-center max-w-2xl mx-auto"},Ae={class:"flex items-center justify-center gap-2 mt-2"},Me={class:"flex items-center justify-end gap-2 text-sm text-muted"},Ge=ie({__name:"[...slug]",async setup(s){let n,o;const c=le(),{data:e}=([n,o]=O(()=>A(c.path,()=>fe("blog").path(c.path).first(),"$DquttgHoet")),n=await n,o(),n);if(!e.value)throw ce({statusCode:404,statusMessage:"Page not found",fatal:!0});const{data:u}=([n,o]=O(()=>A(`${c.path}-surround`,()=>ge("blog",c.path,{fields:["description"]}))),n=await n,o(),n),d=ue("navigation",de([])),T=h(()=>d.value.find(p=>p.path==="/blog")?.children||[]);h(()=>Ce(G(T?.value,e.value)).map(({icon:p,...y})=>y)),e.value.image;const C=e.value?.seo?.title||e.value?.title,w=e.value?.seo?.description||e.value?.description;pe({title:C,description:w,ogDescription:w,ogTitle:C});const l=h(()=>`${window?.location}`),L=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(p,y)=>{const B=H,t=E,r=he,i=Pe,v=Te,g=be,_=Se,D=Le,Q=ve,J=_e,X=me;return f(),k(X,{class:"mt-20 px-2"},{default:P(()=>[m(J,{class:"relative min-h-screen"},{default:P(()=>[a(e)?(f(),k(Q,{key:0},{default:P(()=>[m(t,{to:"/blog",class:"text-sm flex items-center gap-1"},{default:P(()=>[m(B,{name:"lucide:chevron-left"}),y[1]||(y[1]=F(" Blog "))]),_:1,__:[1]}),b("div",Re,[b("div",Ue,[a(e).date?(f(),j("span",Be,$(L(a(e).date)),1)):I("",!0),a(e).date&&a(e).minRead?(f(),j("span",De," - ")):I("",!0),a(e).minRead?(f(),j("span",Fe,$(a(e).minRead)+" MIN READ ",1)):I("",!0)]),m(r,{src:a(e).image,alt:a(e).title,class:"rounded-lg w-full h-[300px] object-cover object-center"},null,8,["src","alt"]),b("h1",qe,$(a(e).title),1),b("p",Oe,$(a(e).description),1),b("div",Ae,[m(i,ye({orientation:"vertical",color:"neutral",variant:"outline",class:"justify-center items-center text-center"},a(e).author),null,16)])]),m(D,{class:"max-w-3xl mx-auto"},{default:P(()=>[a(e).body?(f(),k(v,{key:0,value:a(e)},null,8,["value"])):I("",!0),b("div",Me,[m(g,{size:"sm",variant:"link",color:"neutral",label:"Copy link",onClick:y[0]||(y[0]=Ne=>("copyToClipboard"in p?p.copyToClipboard:a(je))(a(l),"Article link copied to clipboard"))})]),m(_,{surround:a(u)},null,8,["surround"])]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1})}}});export{Ge as default};
